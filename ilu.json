[
  [
    {
      "Name" : "Incomplete LU",
      "Input Type" : "IEgenLIB Relation",
      "Relation" : "{[i,k] -> [ip,kp]: i < ip && 0 <= i && i < m && 0 <= ip && ip < m && rowptr(i) <= k && k < diagptr(i) && rowptr(ip) <= kp && kp < diagptr(ip) && k = kp }",
      "Expected" : "Not Satisfiable",
      "UFS" :
      [
        { 
           "Name" : "colidx",
           "Domain" : "{[i]:0<=i &&i<nnz}",
           "Range" : "{[j]:0<=j &&j<m}",
           "Bijective" : "false",
           "Monotonicity" : "Monotonic_NONE"
        },
        { 
           "Name" : "rowptr",
           "Domain" : "{[j]:0<=j &&j<m}",
           "Range" : "{[i]:0<=i &&i<nnz}",
           "Bijective" : "false",
           "Monotonicity" : "Monotonic_Increasing"
        },
        { 
           "Name" : "diagptr",
           "Domain" : "{[j]:0<=j &&j<m}",
           "Range" : "{[i]:0<=i &&i<nnz}",
           "Bijective" : "false",
           "Monotonicity" : "Monotonic_Increasing"
        }
      ],
      "User Defined" :
      [
        {
          "Type" : "Comment: 1",
          "Forall e1, e2: if e1 is? e2" : "expCompOp",
          "then add: UFSymbol1?(e1)" : "UF1",
          " is? " : "ufCompOp",
          "UFSymbol2?(e2)" : "UF2"
        },
        {
          "Type" : "Comment: 2",
          "Forall e1, e2: if UFSymbol1?(e1)" : "UFSymbol1",
          " is? " : "UFSymbol1",
          "UFSymbol2?(e2)" : "UFSymbol2",
          "then add: e1 is? e2" : "OP"
        },
        {
          "Type" : "1",
          "Forall e1, e2: if e1 is? e2" : "=",
          "then add: UFSymbol1?(e1)" : "rowptr",
          " is? " : "<=",
          "UFSymbol2?(e2)" : "diagptr"
        },
        {
          "Type" : "1",
          "Forall e1, e2: if e1 is? e2" : "<",
          "then add: UFSymbol1?(e1)" : "diagptr",
          " is? " : "<",
          "UFSymbol2?(e2)" : "rowptr"
        }
      ],
      "Do Not Project Out" :
      [
        "i", "ip"
      ],
      "Remove Constraints" : "2",
      "Comment: Code" : [
                  "Following is the CSR ILU0 code. Dependence analysis of this",
                  "code would identify 8 pairs of read/write data accesses",
                  "(in or between S1 and S2) that may produce data dependences.",
                  "Each of these pairs produces two conjunctions considering",
                  "the ordering of accesses (Flow and Anti dependence).",
                  "Overall, there are 16 distinct conjunctions for",
                  "the complete dependence relation.",
                  " ",
                  "for(int i=0; i < n; i++){",
                  "  for(int k= row[i]; k < diag[i]; k++){",
                  "S1: v[k] = v[k] / v[diag[col[k]]];",
                  "    int j1 = k + 1, j2 = diag[col[k]] + 1;",
                  " ",
                  "    while (j1 < row[i + 1] && j2 < row[col[k] + 1]){",
                  "      if {",
                  "S2:     v[j1] -= v[k]*v[j2];", 
                  "        ++j1; ++j2;",
                  "      else if (col[j1] < col[j2]) ++j1;",
                  "      else                        ++j2;",
                  "} } } }"
                  ],
      "Comment: Source of data access in the code for this relation" : [
                    " ",
                    "a read in S1 (v[k]);  a write in S1 (v[k]);"
                  ]
    },
    {
      "Name" : "CSR_ILU",
      "Input Type" : "IEgenLIB Relation",
      "Relation" : "{[i,k,j1,j2] -> [ip,kp,j1p,j2p]: i < ip && 0 <= i && i < m && 0 <= ip && ip < m && rowptr(i) <= k && k < diagptr(i) && rowptr(ip) <= kp && kp < diagptr(ip) && k < j1 && j1 < rowptr(1+i) && kp < j1p && j1p < rowptr(1+ip) && diagptr(colidx(k)) < j2 && j2 < rowptr(1+colidx(k)) && diagptr(colidx(kp)) < j2p && j2p < rowptr(1+colidx(kp)) && colidx(j1) = colidx(j2) && colidx(j1p) = colidx(j2p) && j1 = j2p}",
      "Expected" : "[ m, nnz ] -> { [i, k] -> [ip, kp] : i - colidx(kp) = 0 && colidx(k) >= 0 && colidx(kp) >= 0 && rowptr(i) >= 0 && rowptr(ip) >= 0 && rowptr(colidx(k)) >= 0 && rowptr(colidx(kp)) >= 0 && k - rowptr(i) >= 0 && kp - rowptr(ip) >= 0 && diagptr(i + 1) - rowptr(i + 1) >= 0 && diagptr(ip + 1) - rowptr(ip + 1) >= 0 && diagptr(colidx(k)) - rowptr(colidx(k)) >= 0 && diagptr(colidx(k) + 1) - rowptr(colidx(k) + 1) >= 0 && diagptr(colidx(kp)) - rowptr(colidx(kp)) >= 0 && diagptr(colidx(kp) + 1) - rowptr(colidx(kp) + 1) >= 0 && -k + diagptr(i) - 1 >= 0 && -k + rowptr(i + 1) - 2 >= 0 && -k + rowptr(colidx(kp) + 1) - 2 >= 0 && -ip + m - 2 >= 0 && ip - colidx(kp) - 1 >= 0 && -kp + diagptr(ip) - 1 >= 0 && -kp + rowptr(ip + 1) - 2 >= 0 && m - colidx(k) - 2 >= 0 && nnz - diagptr(i) - 1 >= 0 && nnz - diagptr(i + 1) - 1 >= 0 && nnz - diagptr(ip) - 1 >= 0 && nnz - diagptr(ip + 1) - 1 >= 0 && nnz - diagptr(colidx(k) + 1) - 1 >= 0 && nnz - diagptr(colidx(kp) + 1) - 1 >= 0 && -diagptr(colidx(k)) + rowptr(colidx(k) + 1) - 2 >= 0 && -diagptr(colidx(kp)) + rowptr(i + 1) - 2 >= 0 && -diagptr(colidx(kp)) + rowptr(colidx(kp) + 1) - 2 >= 0 }",
      "Comment: Source of data access in the code for this relation" : [
                    " ",
                    "a read in S2 (v[j2]);  a write in S2 (v[j1]);"
                  ]
    },
    {
      "Name" : "CSR_ILU",
      "Input Type" : "IEgenLIB Relation",
      "Relation" : "{[i,k,j1,j2] -> [ip,kp,j1p,j2p]: ip < i && 0 <= i && i < m && 0 <= ip && ip < m && rowptr(i) <= k && k < diagptr(i) && rowptr(ip) <= kp && kp < diagptr(ip) && k < j1 && j1 < rowptr(1+i) && kp < j1p && j1p < rowptr(1+ip) && diagptr(colidx(k)) < j2 && j2 < rowptr(1+colidx(k)) && diagptr(colidx(kp)) < j2p && j2p < rowptr(1+colidx(kp)) && colidx(j1) = colidx(j2) && colidx(j1p) = colidx(j2p) && j1 = j2p}",
      "Expected" : "[ m, nnz ] -> { [i, k] -> [ip, kp] : i - colidx(kp) = 0 && ip >= 0 && colidx(k) >= 0 && rowptr(i) >= 0 && rowptr(ip) >= 0 && rowptr(colidx(k)) >= 0 && rowptr(colidx(kp)) >= 0 && k - rowptr(i) >= 0 && kp - rowptr(ip) >= 0 && diagptr(i + 1) - rowptr(i + 1) >= 0 && diagptr(ip + 1) - rowptr(ip + 1) >= 0 && diagptr(colidx(k)) - rowptr(colidx(k)) >= 0 && diagptr(colidx(k) + 1) - rowptr(colidx(k) + 1) >= 0 && diagptr(colidx(kp)) - rowptr(colidx(kp)) >= 0 && diagptr(colidx(kp) + 1) - rowptr(colidx(kp) + 1) >= 0 && -k + diagptr(i) - 1 >= 0 && -k + rowptr(i + 1) - 2 >= 0 && -k + rowptr(colidx(kp) + 1) - 2 >= 0 && -ip + colidx(kp) - 1 >= 0 && -kp + diagptr(ip) - 1 >= 0 && -kp + rowptr(ip + 1) - 2 >= 0 && m - colidx(k) - 2 >= 0 && m - colidx(kp) - 2 >= 0 && nnz - diagptr(i) - 1 >= 0 && nnz - diagptr(i + 1) - 1 >= 0 && nnz - diagptr(ip) - 1 >= 0 && nnz - diagptr(ip + 1) - 1 >= 0 && nnz - diagptr(colidx(k) + 1) - 1 >= 0 && nnz - diagptr(colidx(kp) + 1) - 1 >= 0 && -diagptr(colidx(k)) + rowptr(colidx(k) + 1) - 2 >= 0 && -diagptr(colidx(kp)) + rowptr(i + 1) - 2 >= 0 && -diagptr(colidx(kp)) + rowptr(colidx(kp) + 1) - 2 >= 0 }",
      "Comment: Source of data access in the code for this relation" : [
                    " ",
                    "a read in S2 (v[j2]);  a write in S2 (v[j1]);"
                  ]
    }
  ]
]
